(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-friend-list"],{"3f4a":function(t,e,n){var a=n("c3fb");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("e58dc8c8",a,!0,{sourceMap:!1,shadowMode:!1})},4279:function(t,e,n){"use strict";n.r(e);var a=n("5b6f"),i=n("586b");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("ffec");var r=n("828b"),c=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"6f1c841e",null,!1,a["a"],void 0);e["default"]=c.exports},"586b":function(t,e,n){"use strict";n.r(e);var a=n("badc"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},"5b6f":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page"},[n("v-uni-view",{staticClass:"toolbar"},[n("v-uni-view",{staticClass:"title"},[t._v("好友")]),n("v-uni-view",{staticClass:"actions"},[n("v-uni-navigator",{staticClass:"action",attrs:{url:"/pages/friend/search"}},[t._v("搜索")]),n("v-uni-navigator",{staticClass:"action",attrs:{url:"/pages/friend/requests"}},[t._v("请求")])],1)],1),t.friends.length?n("v-uni-view",t._l(t.friends,(function(e){return n("v-uni-view",{key:e.id,staticClass:"friend-row",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goChat(e)}}},[n("v-uni-view",{staticClass:"name"},[t._v(t._s(e.username))]),t.unreadMap[e.id]?n("v-uni-view",{staticClass:"unread"},[t._v(" "+t._s(t.unreadMap[e.id])+" ")]):t._e()],1)})),1):n("v-uni-view",{staticClass:"empty"},[t._v("暂无好友，去搜索添加吧")])],1)},i=[]},badc:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("2634")),s=a(n("2fdc"));n("bf0f"),n("c223");var r={data:function(){return{}},computed:{friends:function(){return this.$store.state.friends.list||[]},unreadMap:function(){return this.$store.state.messages.unread||{}}},onShow:function(){this.$store.state.auth.token?this.init():uni.reLaunch({url:"/pages/auth/login"})},onPullDownRefresh:function(){this.init().finally((function(){return uni.stopPullDownRefresh()}))},methods:{init:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("friends/fetchFriends");case 2:return e.next=4,t.$store.dispatch("friends/fetchRequests");case 4:return e.next=6,t.$store.dispatch("messages/fetchUnread");case 6:return e.next=8,t.$store.dispatch("connectWs");case 8:case"end":return e.stop()}}),e)})))()},goChat:function(t){uni.navigateTo({url:"/pages/chat/session?peer=".concat(t.id,"&name=").concat(encodeURIComponent(t.username))})}}};e.default=r},c3fb:function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,".page[data-v-6f1c841e]{min-height:100vh;padding:12px;box-sizing:border-box}.toolbar[data-v-6f1c841e]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.title[data-v-6f1c841e]{font-size:20px;font-weight:600}.actions[data-v-6f1c841e]{display:flex;align-items:center}.action[data-v-6f1c841e]{margin-left:10px;color:#2b7bff}.friend-row[data-v-6f1c841e]{background:#fff;padding:14px;border-radius:8px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 1px 3px rgba(0,0,0,.04)}.name[data-v-6f1c841e]{font-size:16px}.unread[data-v-6f1c841e]{min-width:20px;padding:4px 8px;background:#ef4444;color:#fff;border-radius:20px;font-size:12px;text-align:center}.empty[data-v-6f1c841e]{text-align:center;color:#6b7280;margin-top:40px}",""]),t.exports=e},ffec:function(t,e,n){"use strict";var a=n("3f4a"),i=n.n(a);i.a}}]);